# Сессии

- [Настройка](#configuration)
- [Основы использования](#session-usage)
- [Одноразовые данные](#flash-data)
- [Сессии в базах данных](#database-sessions)
- [Драйверы](#session-drivers)

<a name="configuration"></a>
## Настройка

HTTP-приложения не имеют состояний. Сессии - способ сохранения информации о клиенте между отдельными запросами. Laravel поставляется со множеством различных механизмов сессий, доступных через единое API. Изначально существует поддержка таких систем, как [Memcached](http://memcached.org), [Redis](http://redis.io) и СУБД.

Настройки сессии содержатся в файле `app/config/session.php`.Обязательно просмотрите параметры, доступные вам - они хорошо документированы. По умолчанию Laravel использует драйвер `native`, который подходит для большинства приложений.

<a name="session-usage"></a>
## Основы использования

**Сохранение переменной в сессии:**

	Session::put('key', 'value');

**Добавление элемента к переменной-массиву:**

	Session::push('user.teams', 'developers');

**Чтение переменной сессии:**

	$value = Session::get('key');

**Чтение переменной со значением по умолчанию:**

	$value = Session::get('key', 'default');

	$value = Session::get('key', function() { return 'умолчание'; });

**Получение всех переменных сессии:**

	$data = Session::all();

**Проверка существования переменой:**

	if (Session::has('users'))
	{
		//
	}

**Удаление переменной из сессии:**

	Session::forget('key');

**Удаление всех переменных:**

	Session::flush();

**Присвоение сессии нового идентификатора:**

	Session::regenerate();

<a name="flash-data"></a>
## Одноразовые данные

Иногда вам нужно сохранить переменную только для следующего запроса. Вы можете сделать это методом `Session::flash` (flash <sup>англ.</sup> - вспышка - прим. пер.):

	Session::flash('key', 'value');

**Продление всех одноразовых переменных ещё на один запрос:**

	Session::reflash();

**Продление только отдельных переменных:**

	Session::keep(array('username', 'email'));

<a name="database-sessions"></a>
## Сессии в базах данных

При использовании драйвера `database` вам нужно создать таблицу, которая будет содержать данные сессий. Ниже - пример такого объявления с помощью конструктора таблиц (`Schema`):

	Schema::create('sessions', function($table)
	{
		$table->string('id')->unique();
		$table->text('payload');
		$table->integer('last_activity');
	});

Либо вы можете использовать команду `session:table` Artisan для создания этой миграции:

	php artisan session:table

	composer dump-autoload

	php artisan migrate
	
<a name="session-drivers"></a>
## Драйверы

"Драйвер" определяет, где будут храниться данные для каждой сессии. Laravel постовляется с целым набором замечательных драйверов:

- `native` - использует встроенные средства PHP для работы с сессиями.
- `cookie` - данные хранятся в виде зашифрованных cookies.
- `database` -  хранение данных в БД, используемой приложением.
- `memcached` и `redis` - используются эти быстрые кэширующие хранилища пар ключ/значение.
- `array` - данные содержатся в виде простых массивов PHP и не будут сохраняться между запросами.

> **Внимание:** драйвер `array` обычно используется для [юнит-тестов](/docs/testing), так как он на самом деле не сохраняет данные для последующих запросов.